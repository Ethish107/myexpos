// ---------------------------------
// 1) Save User SP in Process Table
// ---------------------------------
[PROCESS_TABLE + ( [SYSTEM_STATUS_TABLE + 1] * 16 ) + 13] = SP;

// ---------------------------------
// 2) Switch to Kernel Stack
// ---------------------------------
SP = [PROCESS_TABLE + ( [SYSTEM_STATUS_TABLE + 1] * 16 ) + 11] * 512 - 1;

// ---------------------------------
// 3) Save User Context
// ---------------------------------
backup;

// ---------------------------------
// 4) Print Current PID
// ---------------------------------
print [SYSTEM_STATUS_TABLE + 1];

// ---------------------------------
// 5) Restore User Context
// ---------------------------------
restore;

// Restore User SP
SP = [PROCESS_TABLE + ( [SYSTEM_STATUS_TABLE + 1] * 16 ) + 13];

// ---------------------------------
// 6) Return to User Mode
// ---------------------------------
ireturn;

